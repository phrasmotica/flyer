import{d as k,r as w,o as h,c as x,a as d,b as I,e as T,f as y,w as S,F as U,g as L,u as E,t as B,h as z,p as W,i as J,j as A,k as j,l as G,n as K}from"./index-BK1Fs6bl.js";let P;const Q=new Uint8Array(16);function X(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(Q)}const g=[];for(let l=0;l<256;++l)g.push((l+256).toString(16).slice(1));function Y(l,o=0){return g[l[o+0]]+g[l[o+1]]+g[l[o+2]]+g[l[o+3]]+"-"+g[l[o+4]]+g[l[o+5]]+"-"+g[l[o+6]]+g[l[o+7]]+"-"+g[l[o+8]]+g[l[o+9]]+"-"+g[l[o+10]]+g[l[o+11]]+g[l[o+12]]+g[l[o+13]]+g[l[o+14]]+g[l[o+15]]}const Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F={randomUUID:Z};function M(l,o,n){if(F.randomUUID&&!o&&!l)return F.randomUUID();l=l||{};const r=l.random||(l.rng||X)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,o){n=n||0;for(let c=0;c<16;++c)o[n+c]=r[c];return o}return Y(r)}const q={class:"player-name-input p-fluid"},ee=k({__name:"PlayerNameInput",props:{name:{},placeholder:{},disabled:{type:Boolean}},emits:["setName"],setup(l,{emit:o}){const n=l,r=o;return(c,u)=>{const m=w("InputText");return h(),x("div",q,[d(m,{placeholder:n.placeholder,disabled:n.disabled,modelValue:n.name,"onUpdate:modelValue":u[0]||(u[0]=p=>r("setName",p||""))},null,8,["placeholder","disabled","modelValue"])])}}}),te=y("h1",{class:"border-bottom-1 mb-2"},"Format",-1),se={class:"p-fluid mb-2"},ne=y("span",{class:"pi pi-plus"},null,-1),le=y("span",{class:"pi pi-minus"},null,-1),oe={class:"p-fluid mb-2"},ae=y("h1",{class:"border-bottom-1 mb-2"},"Players",-1),re={class:"p-fluid mb-2"},ce=y("span",{class:"pi pi-plus"},null,-1),ue=y("span",{class:"pi pi-minus"},null,-1),ie={class:"p-fluid"},de=k({__name:"FlyerForm",props:{players:{}},emits:["start","setName","reset"],setup(l,{emit:o}){const n=l,r=o,c=I(4),u=I("Round Robin"),m=I(["Round Robin"]),p=I(1),R=T(()=>n.players.slice(0,c.value)),V=()=>r("start",R.value,p.value);return($,f)=>{const b=w("InputNumber"),_=w("SelectButton"),t=w("Button");return h(),x(U,null,[te,y("div",se,[d(b,{modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=s=>p.value=s),showButtons:"",buttonLayout:"horizontal",min:1,max:5,prefix:"Races to ",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:S(()=>[ne]),decrementbuttonicon:S(()=>[le]),_:1},8,["modelValue"])]),y("div",oe,[d(_,{modelValue:u.value,"onUpdate:modelValue":f[1]||(f[1]=s=>u.value=s),options:m.value,allowEmpty:!1,"aria-labelledby":"basic"},null,8,["modelValue","options"])]),ae,y("div",re,[d(b,{modelValue:c.value,"onUpdate:modelValue":f[2]||(f[2]=s=>c.value=s),showButtons:"",buttonLayout:"horizontal",min:2,max:10,suffix:" players",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:S(()=>[ce]),decrementbuttonicon:S(()=>[ue]),_:1},8,["modelValue"])]),(h(!0),x(U,null,L($.players,(s,e)=>(h(),x("div",null,[d(ee,{class:"mb-2",placeholder:"Player "+(e+1),disabled:e>=c.value,name:s,onSetName:a=>r("setName",e,a)},null,8,["placeholder","disabled","name","onSetName"])]))),256)),y("div",ie,[d(t,{label:"Start",disabled:R.value.some(s=>!s),onClick:V},null,8,["disabled"])])],64)}}}),pe=l=>(W("data-v-d8b3f8dd"),l=l(),J(),l),me=pe(()=>y("h1",{class:"border-bottom-1"},"Results",-1)),_e={key:0},ye=k({__name:"ResultsTable",props:{players:{},results:{}},setup(l){const o=l,n=t=>r(t)?null:t.scores.reduce((e,a)=>e.score>a.score?e:a).playerId,r=t=>{const s=t.scores.map(e=>e.score).reduce((e,a)=>Math.max(e,a));return t.scores.every(e=>e.score===s)},c=t=>r(t)?null:t.scores.reduce((e,a)=>e.score<a.score?e:a).playerId,u=(t,s)=>s.filter(e=>n(e)===t).length,m=(t,s)=>s.filter(e=>r(e)&&e.scores.some(a=>a.playerId===t)).length,p=(t,s)=>s.filter(e=>c(e)===t).length,R=(t,s)=>s.filter(e=>e.scores.some(a=>a.playerId===t)).length<o.players.length-1,V=(t,s,e)=>{const a=u(t,e),i=u(s,e);if(a!==i)return i-a;const v=p(t,e),N=p(s,e);return v!==N?N-v:0},$=T(()=>o.players.sort((t,s)=>V(t.id,s.id,o.results))),f=T(()=>$.value.map((t,s)=>({rank:s+1,name:t.name,wins:u(t.id,o.results),draws:m(t.id,o.results),losses:p(t.id,o.results),incomplete:R(t.id,o.results)}))),b=t=>[{"bg-primary":!t.incomplete&&t.rank===1,"bg-gray-400":t.incomplete}],_=f.value.filter(t=>t.incomplete).length;return(t,s)=>{const e=w("Column"),a=w("DataTable");return h(),x(U,null,[me,d(a,{value:f.value,rowClass:b},{default:S(()=>[d(e,{field:"rank",header:"#"}),d(e,{field:"name",header:"Name"}),d(e,{field:"wins",header:"Won"}),d(e,{field:"draws",header:"Drew"}),d(e,{field:"losses",header:"Lost"})]),_:1},8,["value"]),E(_)>0?(h(),x("h4",_e,[y("em",null,B(E(_))+" player(s) have incomplete results!",1)])):z("",!0)],64)}}}),O=(l,o)=>{const n=l.__vccOpts||l;for(const[r,c]of o)n[r]=c;return n},ve=O(ye,[["__scopeId","data-v-d8b3f8dd"]]),be=k({__name:"PlayerDropdown",props:{players:{},selectedPlayerId:{}},emits:["select"],setup(l,{emit:o}){const n=l,r=o,c=I(n.selectedPlayerId);return A(c,()=>{r("select",c.value)}),(u,m)=>{const p=w("Dropdown");return h(),j(p,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=R=>c.value=R),options:n.players,optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"])}}}),he={class:"flex flex-column md:flex-row md:align-items-center justify-content-between mb-2"},fe={class:"font-bold p-fluid mb-2 md:mb-0"},ge={class:"md:ml-3"},xe=y("span",{class:"pi pi-plus"},null,-1),Ie=y("span",{class:"pi pi-minus"},null,-1),Re={class:"flex justify-content-end gap-2"},we=k({__name:"RecordResultModal",props:{visible:{type:Boolean},players:{},selected:{},results:{},raceTo:{}},emits:["cancel","confirm"],setup(l,{emit:o}){const n=l,r=o,c=n.players.map((b,_)=>_===0?1:0),u=I(n.selected.map(b=>b.id)),m=I(c);A(n,()=>{u.value=n.selected.map(b=>b.id)});const p=T(()=>n.players),R=(b,_)=>{u.value=u.value.map((t,s)=>s===b?_:t)},V=(b,_)=>{m.value=m.value.map((t,s)=>s===b?_:t)},$=()=>{const b={id:M(),scores:u.value.map((_,t)=>({playerId:_,score:m.value[t]}))};r("confirm",b),m.value=c},f=T(()=>!!([...new Set(u.value)].length!==u.value.length||m.value.every(_=>_<n.raceTo)));return(b,_)=>{const t=w("InputNumber"),s=w("Button"),e=w("Dialog");return h(),j(e,{visible:n.visible,"onUpdate:visible":_[1]||(_[1]=a=>n.visible=a),modal:"",header:"Record Result"},{default:S(()=>[(h(!0),x(U,null,L(u.value,(a,i)=>(h(),x("div",he,[y("div",fe,[d(be,{players:p.value,selectedPlayerId:a,onSelect:v=>R(i,v)},null,8,["players","selectedPlayerId","onSelect"])]),y("div",ge,[d(t,{showButtons:"",buttonLayout:"horizontal",modelValue:m.value[i],min:0,max:n.raceTo,"onUpdate:modelValue":v=>V(i,v)},{incrementbuttonicon:S(()=>[xe]),decrementbuttonicon:S(()=>[Ie]),_:2},1032,["modelValue","max","onUpdate:modelValue"])])]))),256)),y("div",Re,[d(s,{type:"button",label:"Cancel",severity:"secondary",onClick:_[0]||(_[0]=a=>r("cancel"))}),d(s,{type:"button",label:"Save",disabled:f.value,onClick:$},null,8,["disabled"])])]),_:1},8,["visible"])}}}),Se={class:"flex flex-column md:flex-row justify-content-between md:align-items-end border-bottom-1 pb-1"},Ve=y("h1",null,"Round-Robin",-1),$e={key:0,class:"flex justify-content-center"},Ce={key:2,class:"p-fluid"},Te=y("i",{class:"pi pi-file-edit"},null,-1),ke=k({__name:"RoundRobinTable",props:{players:{},raceTo:{},results:{}},emits:["addResult"],setup(l,{emit:o}){const n=l,r=o,c=I(n.players[0]),u=I(n.players[1]),m=I(!1),p=T(()=>n.players.length*(n.players.length-1)/2),R=T(()=>p.value-n.results.length),V=(e,a)=>n.results.some(i=>i.scores.some(v=>v.playerId===e)&&i.scores.some(v=>v.playerId===a)),$=(e,a)=>n.results.find(i=>i.scores.some(v=>v.playerId===e)&&i.scores.some(v=>v.playerId===a)),f=(e,a)=>{const i=$(e,a);return i?i.scores.find(v=>v.playerId===e).score:null},b=(e,a)=>{const i=f(e,a),v=f(a,e);return i===null||v===null?"":i>v?"bg-primary":i<v?"bg-red-500":"bg-yellow-200"},_=(e,a)=>{c.value=e,u.value=a,m.value=!0},t=e=>{r("addResult",e),s()},s=()=>{m.value=!1};return(e,a)=>{const i=w("Column"),v=w("Button"),N=w("DataTable");return h(),x(U,null,[y("div",Se,[Ve,y("h4",null,"Results remaining: "+B(R.value),1)]),d(N,{value:n.players},{default:S(()=>[d(i,null,{body:S(C=>[G(B(C.data.name),1)]),_:1}),(h(!0),x(U,null,L(n.players,(C,H)=>(h(),j(i,{header:C.name},{body:S(D=>[D.index===H?(h(),x("div",$e," - ")):V(D.data.id,C.id)?(h(),x("div",{key:1,class:K(["flex justify-content-center",b(D.data.id,C.id)])},B(f(D.data.id,C.id))+"-"+B(f(C.id,D.data.id)),3)):(h(),x("div",Ce,[d(v,{class:"flex justify-content-center",severity:"info",onClick:()=>_(D.data,C)},{default:S(()=>[Te]),_:2},1032,["onClick"])]))]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),d(we,{visible:m.value,players:n.players,selected:[c.value,u.value],results:n.results,raceTo:n.raceTo,onConfirm:t,onCancel:s},null,8,["visible","players","selected","results","raceTo"])],64)}}}),De={key:0},Ue={key:1},Be={class:"p-fluid mt-2"},Ne={key:2},Pe={class:"p-fluid mt-2"},Le=k({__name:"HomeView",setup(l){const o="Julian;Roy;Emile;Luis";let n=[];n=String(o).split(";"),n.length<10&&(n=[...n,...new Array(10-n.length).fill("")]);const r=I(0),c=I(n),u=I([]),m=I(0),p=I([]),R=t=>r.value=t,V=(t,s)=>{c.value=c.value.map((e,a)=>a===t?s:e)},$=(t,s)=>{u.value=t.map(e=>({id:M(),name:e})),m.value=s,R(1)},f=t=>{const s=t.scores.map(e=>e.playerId);return p.value.findIndex(e=>{const a=e.scores.map(i=>i.playerId);return a.length===s.length&&a.every(i=>s.includes(i))})},b=t=>{const s=f(t);s>=0?p.value=p.value.map((e,a)=>a===s?t:e):p.value=[...p.value,t]},_=()=>{R(0),u.value=[],m.value=0,p.value=[]};return(t,s)=>{const e=w("Button");return h(),x("main",null,[r.value===0?(h(),x("div",De,[d(de,{players:c.value,onSetName:V,onStart:$},null,8,["players"])])):r.value===1?(h(),x("div",Ue,[d(ke,{players:u.value,raceTo:m.value,results:p.value,onAddResult:b},null,8,["players","raceTo","results"]),y("div",Be,[d(e,{label:"Finish",onClick:s[0]||(s[0]=()=>R(2))})])])):r.value===2?(h(),x("div",Ne,[d(ve,{players:u.value,results:p.value},null,8,["players","results"]),y("div",Pe,[d(e,{label:"Restart",onClick:_})])])):z("",!0)])}}}),Ee=O(Le,[["__scopeId","data-v-35899df6"]]);export{Ee as default};
