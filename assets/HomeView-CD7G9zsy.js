import{d as B,r as R,o as f,c as x,a as p,b as w,e as J,f as T,g as m,w as S,F as k,h as L,u as j,t as U,i as z,p as A,j as O,k as E,l as F,m as K,n as Q}from"./index-C8lHz3K0.js";let P;const X=new Uint8Array(16);function Y(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(X)}const g=[];for(let n=0;n<256;++n)g.push((n+256).toString(16).slice(1));function Z(n,o=0){return g[n[o+0]]+g[n[o+1]]+g[n[o+2]]+g[n[o+3]]+"-"+g[n[o+4]]+g[n[o+5]]+"-"+g[n[o+6]]+g[n[o+7]]+"-"+g[n[o+8]]+g[n[o+9]]+"-"+g[n[o+10]]+g[n[o+11]]+g[n[o+12]]+g[n[o+13]]+g[n[o+14]]+g[n[o+15]]}const q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:q};function H(n,o,l){if(M.randomUUID&&!o&&!n)return M.randomUUID();n=n||{};const r=n.random||(n.rng||Y)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,o){l=l||0;for(let c=0;c<16;++c)o[l+c]=r[c];return o}return Z(r)}const ee={class:"player-name-input p-fluid"},te=B({__name:"PlayerNameInput",props:{name:{},placeholder:{},disabled:{type:Boolean}},emits:["setName"],setup(n,{emit:o}){const l=n,r=o;return(c,i)=>{const _=R("InputText");return f(),x("div",ee,[p(_,{placeholder:l.placeholder,disabled:l.disabled,modelValue:l.name,"onUpdate:modelValue":i[0]||(i[0]=y=>r("setName",y||""))},null,8,["placeholder","disabled","modelValue"])])}}}),se=m("h1",{class:"border-bottom-1 mb-2"},"Format",-1),ne={class:"p-fluid mb-2"},le=m("span",{class:"pi pi-plus"},null,-1),oe=m("span",{class:"pi pi-minus"},null,-1),ae={class:"p-fluid mb-2"},re=m("h1",{class:"border-bottom-1 mb-2"},"Players",-1),ce={class:"p-fluid mb-2"},ue=m("span",{class:"pi pi-plus"},null,-1),ie=m("span",{class:"pi pi-minus"},null,-1),de={class:"p-fluid"},me=B({__name:"FlyerForm",props:{players:{}},emits:["start","setName","reset"],setup(n,{emit:o}){const l=n,r=o,c=w(4),i=w("Round Robin"),_=w(["Round Robin"]),y=w(1);J(()=>{const V=document.getElementsByClassName("p-inputnumber-button");for(const h of V)h.addEventListener("mouseup",()=>{var u;console.log(document.activeElement),(u=document.activeElement)==null||u.blur()})});const I=T(()=>l.players.slice(0,c.value)),$=()=>r("start",I.value,y.value);return(V,h)=>{const u=R("InputNumber"),v=R("SelectButton"),t=R("Button");return f(),x(k,null,[se,m("div",ne,[p(u,{modelValue:y.value,"onUpdate:modelValue":h[0]||(h[0]=s=>y.value=s),showButtons:"",buttonLayout:"horizontal",min:1,max:5,prefix:"Races to ",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:S(()=>[le]),decrementbuttonicon:S(()=>[oe]),_:1},8,["modelValue"])]),m("div",ae,[p(v,{modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=s=>i.value=s),options:_.value,allowEmpty:!1,"aria-labelledby":"basic"},null,8,["modelValue","options"])]),re,m("div",ce,[p(u,{modelValue:c.value,"onUpdate:modelValue":h[2]||(h[2]=s=>c.value=s),showButtons:"",buttonLayout:"horizontal",min:2,max:10,suffix:" players",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:S(()=>[ue]),decrementbuttonicon:S(()=>[ie]),_:1},8,["modelValue"])]),(f(!0),x(k,null,L(V.players,(s,e)=>(f(),x("div",null,[p(te,{class:"mb-2",placeholder:"Player "+(e+1),disabled:e>=c.value,name:s,onSetName:a=>r("setName",e,a)},null,8,["placeholder","disabled","name","onSetName"])]))),256)),m("div",de,[p(t,{label:"Start",disabled:I.value.some(s=>!s),onClick:$},null,8,["disabled"])])],64)}}}),pe=n=>(A("data-v-d8b3f8dd"),n=n(),O(),n),_e=pe(()=>m("h1",{class:"border-bottom-1"},"Results",-1)),ye={key:0},ve=B({__name:"ResultsTable",props:{players:{},results:{}},setup(n){const o=n,l=t=>r(t)?null:t.scores.reduce((e,a)=>e.score>a.score?e:a).playerId,r=t=>{const s=t.scores.map(e=>e.score).reduce((e,a)=>Math.max(e,a));return t.scores.every(e=>e.score===s)},c=t=>r(t)?null:t.scores.reduce((e,a)=>e.score<a.score?e:a).playerId,i=(t,s)=>s.filter(e=>l(e)===t).length,_=(t,s)=>s.filter(e=>r(e)&&e.scores.some(a=>a.playerId===t)).length,y=(t,s)=>s.filter(e=>c(e)===t).length,I=(t,s)=>s.filter(e=>e.scores.some(a=>a.playerId===t)).length<o.players.length-1,$=(t,s,e)=>{const a=i(t,e),d=i(s,e);if(a!==d)return d-a;const b=y(t,e),N=y(s,e);return b!==N?N-b:0},V=T(()=>o.players.sort((t,s)=>$(t.id,s.id,o.results))),h=T(()=>V.value.map((t,s)=>({rank:s+1,name:t.name,wins:i(t.id,o.results),draws:_(t.id,o.results),losses:y(t.id,o.results),incomplete:I(t.id,o.results)}))),u=t=>[{"bg-primary":!t.incomplete&&t.rank===1,"bg-gray-400":t.incomplete}],v=h.value.filter(t=>t.incomplete).length;return(t,s)=>{const e=R("Column"),a=R("DataTable");return f(),x(k,null,[_e,p(a,{value:h.value,rowClass:u},{default:S(()=>[p(e,{field:"rank",header:"#"}),p(e,{field:"name",header:"Name"}),p(e,{field:"wins",header:"Won"}),p(e,{field:"draws",header:"Drew"}),p(e,{field:"losses",header:"Lost"})]),_:1},8,["value"]),j(v)>0?(f(),x("h4",ye,[m("em",null,U(j(v))+" player(s) have incomplete results!",1)])):z("",!0)],64)}}}),W=(n,o)=>{const l=n.__vccOpts||n;for(const[r,c]of o)l[r]=c;return l},be=W(ve,[["__scopeId","data-v-d8b3f8dd"]]),he=B({__name:"PlayerDropdown",props:{players:{},selectedPlayerId:{}},emits:["select"],setup(n,{emit:o}){const l=n,r=o,c=w(l.selectedPlayerId);return E(c,()=>{r("select",c.value)}),(i,_)=>{const y=R("Dropdown");return f(),F(y,{modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=I=>c.value=I),options:l.players,optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"])}}}),fe={class:"flex flex-column md:flex-row md:align-items-center justify-content-between mb-2"},ge={class:"font-bold p-fluid mb-2 md:mb-0"},xe={class:"md:ml-3"},we=m("span",{class:"pi pi-plus"},null,-1),Ie=m("span",{class:"pi pi-minus"},null,-1),Re={class:"flex justify-content-end gap-2"},Se=B({__name:"RecordResultModal",props:{visible:{type:Boolean},players:{},selected:{},results:{},raceTo:{}},emits:["cancel","confirm"],setup(n,{emit:o}){const l=n,r=o,c=l.players.map((u,v)=>v===0?1:0),i=w(l.selected.map(u=>u.id)),_=w(c);E([_],()=>{var u;(u=document.activeElement)==null||u.blur()}),E(l,()=>{i.value=l.selected.map(u=>u.id)});const y=T(()=>l.players),I=(u,v)=>{i.value=i.value.map((t,s)=>s===u?v:t)},$=(u,v)=>{_.value=_.value.map((t,s)=>s===u?v:t)},V=()=>{const u={id:H(),scores:i.value.map((v,t)=>({playerId:v,score:_.value[t]}))};r("confirm",u),_.value=c},h=T(()=>!!([...new Set(i.value)].length!==i.value.length||_.value.every(v=>v<l.raceTo)));return(u,v)=>{const t=R("InputNumber"),s=R("Button"),e=R("Dialog");return f(),F(e,{visible:l.visible,"onUpdate:visible":v[1]||(v[1]=a=>l.visible=a),modal:"",header:"Record Result"},{default:S(()=>[(f(!0),x(k,null,L(i.value,(a,d)=>(f(),x("div",fe,[m("div",ge,[p(he,{players:y.value,selectedPlayerId:a,onSelect:b=>I(d,b)},null,8,["players","selectedPlayerId","onSelect"])]),m("div",xe,[p(t,{showButtons:"",buttonLayout:"horizontal",modelValue:_.value[d],min:0,max:l.raceTo,"onUpdate:modelValue":b=>$(d,b)},{incrementbuttonicon:S(()=>[we]),decrementbuttonicon:S(()=>[Ie]),_:2},1032,["modelValue","max","onUpdate:modelValue"])])]))),256)),m("div",Re,[p(s,{type:"button",label:"Cancel",severity:"secondary",onClick:v[0]||(v[0]=a=>r("cancel"))}),p(s,{type:"button",label:"Save",disabled:h.value,onClick:V},null,8,["disabled"])])]),_:1},8,["visible"])}}}),Ve={class:"flex flex-column md:flex-row justify-content-between md:align-items-end border-bottom-1 pb-1"},$e=m("h1",null,"Round-Robin",-1),Ce={key:0,class:"flex justify-content-center"},Te={key:2,class:"p-fluid"},ke=m("i",{class:"pi pi-file-edit"},null,-1),Be=B({__name:"RoundRobinTable",props:{players:{},raceTo:{},results:{}},emits:["addResult"],setup(n,{emit:o}){const l=n,r=o,c=w(l.players[0]),i=w(l.players[1]),_=w(!1),y=T(()=>l.players.length*(l.players.length-1)/2),I=T(()=>y.value-l.results.length),$=(e,a)=>l.results.some(d=>d.scores.some(b=>b.playerId===e)&&d.scores.some(b=>b.playerId===a)),V=(e,a)=>l.results.find(d=>d.scores.some(b=>b.playerId===e)&&d.scores.some(b=>b.playerId===a)),h=(e,a)=>{const d=V(e,a);return d?d.scores.find(b=>b.playerId===e).score:null},u=(e,a)=>{const d=h(e,a),b=h(a,e);return d===null||b===null?"":d>b?"bg-primary":d<b?"bg-red-500":"bg-yellow-200"},v=(e,a)=>{c.value=e,i.value=a,_.value=!0},t=e=>{r("addResult",e),s()},s=()=>{_.value=!1};return(e,a)=>{const d=R("Column"),b=R("Button"),N=R("DataTable");return f(),x(k,null,[m("div",Ve,[$e,m("h4",null,"Results remaining: "+U(I.value),1)]),p(N,{value:l.players},{default:S(()=>[p(d,null,{body:S(C=>[K(U(C.data.name),1)]),_:1}),(f(!0),x(k,null,L(l.players,(C,G)=>(f(),F(d,{header:C.name},{body:S(D=>[D.index===G?(f(),x("div",Ce," - ")):$(D.data.id,C.id)?(f(),x("div",{key:1,class:Q(["flex justify-content-center",u(D.data.id,C.id)])},U(h(D.data.id,C.id))+"-"+U(h(C.id,D.data.id)),3)):(f(),x("div",Te,[p(b,{class:"flex justify-content-center",severity:"info",onClick:()=>v(D.data,C)},{default:S(()=>[ke]),_:2},1032,["onClick"])]))]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),p(Se,{visible:_.value,players:l.players,selected:[c.value,i.value],results:l.results,raceTo:l.raceTo,onConfirm:t,onCancel:s},null,8,["visible","players","selected","results","raceTo"])],64)}}}),De=n=>(A("data-v-2133dae6"),n=n(),O(),n),Ue={key:0},Ne={key:1},Pe={class:"p-fluid mt-2"},Ee={key:2},Le={class:"p-fluid mt-2"},Fe=De(()=>m("footer",null,[m("a",{href:"https://www.flaticon.com/free-icons/ball-eight",title:"ball eight icons"},"Ball eight icons created by Boris farias - Flaticon")],-1)),je=B({__name:"HomeView",setup(n){const o="Player 1;Player 2;Player 3;Player 4";let l=[];l=String(o).split(";"),l.length<10&&(l=[...l,...new Array(10-l.length).fill("")]);const r=w(0),c=w(l),i=w([]),_=w(0),y=w([]),I=t=>r.value=t,$=(t,s)=>{c.value=c.value.map((e,a)=>a===t?s:e)},V=(t,s)=>{i.value=t.map(e=>({id:H(),name:e})),_.value=s,I(1)},h=t=>{const s=t.scores.map(e=>e.playerId);return y.value.findIndex(e=>{const a=e.scores.map(d=>d.playerId);return a.length===s.length&&a.every(d=>s.includes(d))})},u=t=>{const s=h(t);s>=0?y.value=y.value.map((e,a)=>a===s?t:e):y.value=[...y.value,t]},v=()=>{I(0),i.value=[],_.value=0,y.value=[]};return(t,s)=>{const e=R("Button");return f(),x(k,null,[m("main",null,[r.value===0?(f(),x("div",Ue,[p(me,{players:c.value,onSetName:$,onStart:V},null,8,["players"])])):r.value===1?(f(),x("div",Ne,[p(Be,{players:i.value,raceTo:_.value,results:y.value,onAddResult:u},null,8,["players","raceTo","results"]),m("div",Pe,[p(e,{label:"Finish",onClick:s[0]||(s[0]=()=>I(2))})])])):r.value===2?(f(),x("div",Ee,[p(be,{players:i.value,results:y.value},null,8,["players","results"]),m("div",Le,[p(e,{label:"Restart",onClick:v})])])):z("",!0)]),Fe],64)}}}),ze=W(je,[["__scopeId","data-v-2133dae6"]]);export{ze as default};
