import{d as k,r as R,o as h,c as x,a as p,b as I,w as E,e as T,f as v,g as V,F as U,h as L,u as F,t as B,i as A,p as W,j as G,k as j,l as J,n as K}from"./index-Bw8xllyl.js";let N;const Q=new Uint8Array(16);function X(){if(!N&&(N=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(Q)}const g=[];for(let l=0;l<256;++l)g.push((l+256).toString(16).slice(1));function Y(l,o=0){return g[l[o+0]]+g[l[o+1]]+g[l[o+2]]+g[l[o+3]]+"-"+g[l[o+4]]+g[l[o+5]]+"-"+g[l[o+6]]+g[l[o+7]]+"-"+g[l[o+8]]+g[l[o+9]]+"-"+g[l[o+10]]+g[l[o+11]]+g[l[o+12]]+g[l[o+13]]+g[l[o+14]]+g[l[o+15]]}const Z=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:Z};function M(l,o,n){if(z.randomUUID&&!o&&!l)return z.randomUUID();l=l||{};const c=l.random||(l.rng||X)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,o){n=n||0;for(let r=0;r<16;++r)o[n+r]=c[r];return o}return Y(c)}const q={class:"player-name-input p-fluid"},ee=k({__name:"PlayerNameInput",props:{name:{},placeholder:{},disabled:{type:Boolean}},emits:["setName"],setup(l,{emit:o}){const n=l,c=o;return(r,u)=>{const m=R("InputText");return h(),x("div",q,[p(m,{placeholder:n.placeholder,disabled:n.disabled,modelValue:n.name,"onUpdate:modelValue":u[0]||(u[0]=d=>c("setName",d||""))},null,8,["placeholder","disabled","modelValue"])])}}}),te=v("h1",{class:"border-bottom-1 mb-2"},"Format",-1),se={class:"p-fluid mb-2"},ne=v("span",{class:"pi pi-plus"},null,-1),le=v("span",{class:"pi pi-minus"},null,-1),oe={class:"p-fluid mb-2"},ae=v("h1",{class:"border-bottom-1 mb-2"},"Players",-1),re={class:"p-fluid mb-2"},ce=v("span",{class:"pi pi-plus"},null,-1),ue=v("span",{class:"pi pi-minus"},null,-1),ie={class:"p-fluid"},de=k({__name:"FlyerForm",props:{players:{}},emits:["start","setName","reset"],setup(l,{emit:o}){const n=l,c=o,r=I(4),u=I("Round Robin"),m=I(["Round Robin"]),d=I(1);E([r,d],()=>{var S;(S=document.activeElement)==null||S.blur()});const w=T(()=>n.players.slice(0,r.value)),$=()=>c("start",w.value,d.value);return(S,f)=>{const _=R("InputNumber"),y=R("SelectButton"),t=R("Button");return h(),x(U,null,[te,v("div",se,[p(_,{modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=s=>d.value=s),showButtons:"",buttonLayout:"horizontal",min:1,max:5,prefix:"Races to ",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:V(()=>[ne]),decrementbuttonicon:V(()=>[le]),_:1},8,["modelValue"])]),v("div",oe,[p(y,{modelValue:u.value,"onUpdate:modelValue":f[1]||(f[1]=s=>u.value=s),options:m.value,allowEmpty:!1,"aria-labelledby":"basic"},null,8,["modelValue","options"])]),ae,v("div",re,[p(_,{modelValue:r.value,"onUpdate:modelValue":f[2]||(f[2]=s=>r.value=s),showButtons:"",buttonLayout:"horizontal",min:2,max:10,suffix:" players",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:V(()=>[ce]),decrementbuttonicon:V(()=>[ue]),_:1},8,["modelValue"])]),(h(!0),x(U,null,L(S.players,(s,e)=>(h(),x("div",null,[p(ee,{class:"mb-2",placeholder:"Player "+(e+1),disabled:e>=r.value,name:s,onSetName:a=>c("setName",e,a)},null,8,["placeholder","disabled","name","onSetName"])]))),256)),v("div",ie,[p(t,{label:"Start",disabled:w.value.some(s=>!s),onClick:$},null,8,["disabled"])])],64)}}}),pe=l=>(W("data-v-d8b3f8dd"),l=l(),G(),l),me=pe(()=>v("h1",{class:"border-bottom-1"},"Results",-1)),_e={key:0},ye=k({__name:"ResultsTable",props:{players:{},results:{}},setup(l){const o=l,n=t=>c(t)?null:t.scores.reduce((e,a)=>e.score>a.score?e:a).playerId,c=t=>{const s=t.scores.map(e=>e.score).reduce((e,a)=>Math.max(e,a));return t.scores.every(e=>e.score===s)},r=t=>c(t)?null:t.scores.reduce((e,a)=>e.score<a.score?e:a).playerId,u=(t,s)=>s.filter(e=>n(e)===t).length,m=(t,s)=>s.filter(e=>c(e)&&e.scores.some(a=>a.playerId===t)).length,d=(t,s)=>s.filter(e=>r(e)===t).length,w=(t,s)=>s.filter(e=>e.scores.some(a=>a.playerId===t)).length<o.players.length-1,$=(t,s,e)=>{const a=u(t,e),i=u(s,e);if(a!==i)return i-a;const b=d(t,e),P=d(s,e);return b!==P?P-b:0},S=T(()=>o.players.sort((t,s)=>$(t.id,s.id,o.results))),f=T(()=>S.value.map((t,s)=>({rank:s+1,name:t.name,wins:u(t.id,o.results),draws:m(t.id,o.results),losses:d(t.id,o.results),incomplete:w(t.id,o.results)}))),_=t=>[{"bg-primary":!t.incomplete&&t.rank===1,"bg-gray-400":t.incomplete}],y=f.value.filter(t=>t.incomplete).length;return(t,s)=>{const e=R("Column"),a=R("DataTable");return h(),x(U,null,[me,p(a,{value:f.value,rowClass:_},{default:V(()=>[p(e,{field:"rank",header:"#"}),p(e,{field:"name",header:"Name"}),p(e,{field:"wins",header:"Won"}),p(e,{field:"draws",header:"Drew"}),p(e,{field:"losses",header:"Lost"})]),_:1},8,["value"]),F(y)>0?(h(),x("h4",_e,[v("em",null,B(F(y))+" player(s) have incomplete results!",1)])):A("",!0)],64)}}}),O=(l,o)=>{const n=l.__vccOpts||l;for(const[c,r]of o)n[c]=r;return n},ve=O(ye,[["__scopeId","data-v-d8b3f8dd"]]),be=k({__name:"PlayerDropdown",props:{players:{},selectedPlayerId:{}},emits:["select"],setup(l,{emit:o}){const n=l,c=o,r=I(n.selectedPlayerId);return E(r,()=>{c("select",r.value)}),(u,m)=>{const d=R("Dropdown");return h(),j(d,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=w=>r.value=w),options:n.players,optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"])}}}),he={class:"flex flex-column md:flex-row md:align-items-center justify-content-between mb-2"},fe={class:"font-bold p-fluid mb-2 md:mb-0"},ge={class:"md:ml-3"},xe=v("span",{class:"pi pi-plus"},null,-1),Ie=v("span",{class:"pi pi-minus"},null,-1),we={class:"flex justify-content-end gap-2"},Re=k({__name:"RecordResultModal",props:{visible:{type:Boolean},players:{},selected:{},results:{},raceTo:{}},emits:["cancel","confirm"],setup(l,{emit:o}){const n=l,c=o,r=n.players.map((_,y)=>y===0?1:0),u=I(n.selected.map(_=>_.id)),m=I(r);E([m],()=>{var _;(_=document.activeElement)==null||_.blur()}),E(n,()=>{u.value=n.selected.map(_=>_.id)});const d=T(()=>n.players),w=(_,y)=>{u.value=u.value.map((t,s)=>s===_?y:t)},$=(_,y)=>{m.value=m.value.map((t,s)=>s===_?y:t)},S=()=>{const _={id:M(),scores:u.value.map((y,t)=>({playerId:y,score:m.value[t]}))};c("confirm",_),m.value=r},f=T(()=>!!([...new Set(u.value)].length!==u.value.length||m.value.every(y=>y<n.raceTo)));return(_,y)=>{const t=R("InputNumber"),s=R("Button"),e=R("Dialog");return h(),j(e,{visible:n.visible,"onUpdate:visible":y[1]||(y[1]=a=>n.visible=a),modal:"",header:"Record Result"},{default:V(()=>[(h(!0),x(U,null,L(u.value,(a,i)=>(h(),x("div",he,[v("div",fe,[p(be,{players:d.value,selectedPlayerId:a,onSelect:b=>w(i,b)},null,8,["players","selectedPlayerId","onSelect"])]),v("div",ge,[p(t,{showButtons:"",buttonLayout:"horizontal",modelValue:m.value[i],min:0,max:n.raceTo,"onUpdate:modelValue":b=>$(i,b)},{incrementbuttonicon:V(()=>[xe]),decrementbuttonicon:V(()=>[Ie]),_:2},1032,["modelValue","max","onUpdate:modelValue"])])]))),256)),v("div",we,[p(s,{type:"button",label:"Cancel",severity:"secondary",onClick:y[0]||(y[0]=a=>c("cancel"))}),p(s,{type:"button",label:"Save",disabled:f.value,onClick:S},null,8,["disabled"])])]),_:1},8,["visible"])}}}),Se={class:"flex flex-column md:flex-row justify-content-between md:align-items-end border-bottom-1 pb-1"},Ve=v("h1",null,"Round-Robin",-1),$e={key:0,class:"flex justify-content-center"},Ce={key:2,class:"p-fluid"},Te=v("i",{class:"pi pi-file-edit"},null,-1),ke=k({__name:"RoundRobinTable",props:{players:{},raceTo:{},results:{}},emits:["addResult"],setup(l,{emit:o}){const n=l,c=o,r=I(n.players[0]),u=I(n.players[1]),m=I(!1),d=T(()=>n.players.length*(n.players.length-1)/2),w=T(()=>d.value-n.results.length),$=(e,a)=>n.results.some(i=>i.scores.some(b=>b.playerId===e)&&i.scores.some(b=>b.playerId===a)),S=(e,a)=>n.results.find(i=>i.scores.some(b=>b.playerId===e)&&i.scores.some(b=>b.playerId===a)),f=(e,a)=>{const i=S(e,a);return i?i.scores.find(b=>b.playerId===e).score:null},_=(e,a)=>{const i=f(e,a),b=f(a,e);return i===null||b===null?"":i>b?"bg-primary":i<b?"bg-red-500":"bg-yellow-200"},y=(e,a)=>{r.value=e,u.value=a,m.value=!0},t=e=>{c("addResult",e),s()},s=()=>{m.value=!1};return(e,a)=>{const i=R("Column"),b=R("Button"),P=R("DataTable");return h(),x(U,null,[v("div",Se,[Ve,v("h4",null,"Results remaining: "+B(w.value),1)]),p(P,{value:n.players},{default:V(()=>[p(i,null,{body:V(C=>[J(B(C.data.name),1)]),_:1}),(h(!0),x(U,null,L(n.players,(C,H)=>(h(),j(i,{header:C.name},{body:V(D=>[D.index===H?(h(),x("div",$e," - ")):$(D.data.id,C.id)?(h(),x("div",{key:1,class:K(["flex justify-content-center",_(D.data.id,C.id)])},B(f(D.data.id,C.id))+"-"+B(f(C.id,D.data.id)),3)):(h(),x("div",Ce,[p(b,{class:"flex justify-content-center",severity:"info",onClick:()=>y(D.data,C)},{default:V(()=>[Te]),_:2},1032,["onClick"])]))]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),p(Re,{visible:m.value,players:n.players,selected:[r.value,u.value],results:n.results,raceTo:n.raceTo,onConfirm:t,onCancel:s},null,8,["visible","players","selected","results","raceTo"])],64)}}}),De={key:0},Ue={key:1},Be={class:"p-fluid mt-2"},Pe={key:2},Ne={class:"p-fluid mt-2"},Ee=k({__name:"HomeView",setup(l){const o="Player 1;Player 2;Player 3;Player 4";let n=[];n=String(o).split(";"),n.length<10&&(n=[...n,...new Array(10-n.length).fill("")]);const c=I(0),r=I(n),u=I([]),m=I(0),d=I([]),w=t=>c.value=t,$=(t,s)=>{r.value=r.value.map((e,a)=>a===t?s:e)},S=(t,s)=>{u.value=t.map(e=>({id:M(),name:e})),m.value=s,w(1)},f=t=>{const s=t.scores.map(e=>e.playerId);return d.value.findIndex(e=>{const a=e.scores.map(i=>i.playerId);return a.length===s.length&&a.every(i=>s.includes(i))})},_=t=>{const s=f(t);s>=0?d.value=d.value.map((e,a)=>a===s?t:e):d.value=[...d.value,t]},y=()=>{w(0),u.value=[],m.value=0,d.value=[]};return(t,s)=>{const e=R("Button");return h(),x("main",null,[c.value===0?(h(),x("div",De,[p(de,{players:r.value,onSetName:$,onStart:S},null,8,["players"])])):c.value===1?(h(),x("div",Ue,[p(ke,{players:u.value,raceTo:m.value,results:d.value,onAddResult:_},null,8,["players","raceTo","results"]),v("div",Be,[p(e,{label:"Finish",onClick:s[0]||(s[0]=()=>w(2))})])])):c.value===2?(h(),x("div",Pe,[p(ve,{players:u.value,results:d.value},null,8,["players","results"]),v("div",Ne,[p(e,{label:"Restart",onClick:y})])])):A("",!0)])}}}),je=O(Ee,[["__scopeId","data-v-35899df6"]]);export{je as default};
