import{d as U,o as y,c as b,a as _,t as k,n as z,r as R,w as L,b as $,e as D,f as C,g as V,h as F,i as h,F as B,j as N,k as G,u as j,p as H,l as O,m as J}from"./index-BY5mNzBP.js";let P;const K=new Uint8Array(16);function Q(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(K)}const I=[];for(let n=0;n<256;++n)I.push((n+256).toString(16).slice(1));function X(n,a=0){return I[n[a+0]]+I[n[a+1]]+I[n[a+2]]+I[n[a+3]]+"-"+I[n[a+4]]+I[n[a+5]]+"-"+I[n[a+6]]+I[n[a+7]]+"-"+I[n[a+8]]+I[n[a+9]]+"-"+I[n[a+10]]+I[n[a+11]]+I[n[a+12]]+I[n[a+13]]+I[n[a+14]]+I[n[a+15]]}const Y=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:Y};function E(n,a,l){if(M.randomUUID&&!a&&!n)return M.randomUUID();n=n||{};const i=n.random||(n.rng||Q)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,a){l=l||0;for(let r=0;r<16;++r)a[l+r]=i[r];return a}return X(i)}const Z={class:"grid m-0"},q={class:"col-5"},ee={key:0},te={key:1},se={class:"col-5 text-right"},le=U({__name:"FixtureCard",props:{players:{},result:{}},emits:["showResultModal"],setup(n,{emit:a}){const l=n,i=a,r=d=>d!=null&&d.startTime?"bg-cyan-400":"bg-cyan-100",u=d=>{var c;return((c=l.players.find(v=>v.id===d))==null?void 0:c.name)??d};return(d,c)=>{var v;return y(),b("div",Z,[_("div",q,k(u(l.result.scores[0].playerId)),1),_("div",{class:z(["col-2 text-center cursor-pointer",r(l.result)]),onClick:c[0]||(c[0]=()=>i("showResultModal",l.result))},[(v=l.result)!=null&&v.startTime?(y(),b("span",ee,k(l.result.scores.map(x=>x.score).join("-")),1)):(y(),b("span",te," ?-? "))],2),_("div",se,k(u(l.result.scores[1].playerId)),1)])}}}),ne=U({__name:"PlayerDropdown",props:{players:{},selectedPlayerId:{}},emits:["select"],setup(n,{emit:a}){const l=n,i=a,r=R(l.selectedPlayerId);return L(r,()=>{i("select",r.value)}),(u,d)=>{const c=$("Dropdown");return y(),D(c,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=v=>r.value=v),options:l.players,optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"])}}}),oe={class:"flex flex-column md:flex-row md:align-items-center justify-content-between mb-2"},ae={class:"font-bold p-fluid mb-2 md:mb-0"},re={class:"md:ml-3"},ue=_("span",{class:"pi pi-plus"},null,-1),ce=_("span",{class:"pi pi-minus"},null,-1),ie={class:"flex justify-content-end gap-2"},W=U({__name:"RecordResultModal",props:{visible:{type:Boolean},players:{},result:{},raceTo:{}},emits:["cancel","confirm"],setup(n,{emit:a}){const l=n,i=a,r=R(l.visible),u=R(l.result.scores.map(m=>m.playerId)),d=R(l.result.scores.map(m=>m.score));L([d],()=>{var m;(m=document.activeElement)==null||m.blur()}),L(l,()=>{r.value=l.visible,u.value=l.result.scores.map(m=>m.playerId),d.value=l.result.scores.map(m=>m.score)});const c=C(()=>l.players),v=(m,t)=>{u.value=u.value.map((s,e)=>e===m?t:s)},x=(m,t)=>{d.value=d.value.map((s,e)=>e===m?t:s)},S=()=>{const m={id:l.result.id,scores:u.value.map((t,s)=>({playerId:t,score:d.value[s]})),startTime:l.result.startTime||Date.now()};i("confirm",m)},g=C(()=>!!([...new Set(u.value)].length!==u.value.length||d.value.every(t=>t<l.raceTo))),f=C(()=>`Record Result (${l.result.startTime?"in progress":"not started"})`);return(m,t)=>{const s=$("InputNumber"),e=$("Button"),o=$("Dialog");return y(),D(o,{visible:r.value,"onUpdate:visible":t[1]||(t[1]=p=>r.value=p),modal:"",header:f.value},{default:V(()=>[(y(!0),b(B,null,F(u.value,(p,w)=>(y(),b("div",oe,[_("div",ae,[h(ne,{players:c.value,selectedPlayerId:p,onSelect:T=>v(w,T)},null,8,["players","selectedPlayerId","onSelect"])]),_("div",re,[h(s,{showButtons:"",buttonLayout:"horizontal",modelValue:d.value[w],min:0,max:l.raceTo,"onUpdate:modelValue":T=>x(w,T)},{incrementbuttonicon:V(()=>[ue]),decrementbuttonicon:V(()=>[ce]),_:2},1032,["modelValue","max","onUpdate:modelValue"])])]))),256)),_("div",ie,[h(e,{type:"button",label:"Cancel",severity:"secondary",onClick:t[0]||(t[0]=p=>i("cancel"))}),h(e,{type:"button",label:"Save",disabled:g.value,onClick:S},null,8,["disabled"])])]),_:1},8,["visible","header"])}}}),de={class:"flex flex-column md:flex-row justify-content-between md:align-items-end border-bottom-1 pb-1"},me=_("h1",null,"Fixtures",-1),pe={class:"mt-1 pb-1 border-gray-200 border-bottom-1 mb-1"},_e=U({__name:"FixtureList",props:{players:{},raceTo:{},results:{}},emits:["updateResult"],setup(n,{emit:a}){const l=n,i=a,r=R(),u=R(!1),d=C(()=>l.results.filter(f=>!f.startTime).length),c=C(()=>v(l.results)),v=f=>{const m=[],t=[[1,2],[3,4],[1,3],[2,4],[1,4],[2,3]].map(([s,e])=>[l.players[s-1].id,l.players[e-1].id]);for(const[s,e]of t){const o=f.find(p=>p.scores.some(w=>w.playerId===s)&&p.scores.some(w=>w.playerId===e));o&&m.push(o)}return m},x=f=>{r.value=f,u.value=!0},S=f=>{i("updateResult",f),g()},g=()=>{u.value=!1};return(f,m)=>(y(),b(B,null,[_("div",de,[me,_("h4",null,"Results remaining: "+k(d.value),1)]),_("div",null,[(y(!0),b(B,null,F(c.value,t=>(y(),b("div",pe,[h(le,{players:l.players,result:t,onShowResultModal:()=>x(t)},null,8,["players","result","onShowResultModal"])]))),256))]),r.value?(y(),D(W,{key:0,visible:u.value,players:l.players,result:r.value,raceTo:l.raceTo,onConfirm:S,onCancel:g},null,8,["visible","players","result","raceTo"])):N("",!0)],64))}}),ye={class:"player-name-input p-fluid"},ve=U({__name:"PlayerNameInput",props:{name:{},placeholder:{},disabled:{type:Boolean}},emits:["setName"],setup(n,{emit:a}){const l=n,i=a;return(r,u)=>{const d=$("InputText");return y(),b("div",ye,[h(d,{placeholder:l.placeholder,disabled:l.disabled,modelValue:l.name,"onUpdate:modelValue":u[0]||(u[0]=c=>i("setName",c||""))},null,8,["placeholder","disabled","modelValue"])])}}}),be=_("h1",{class:"border-bottom-1 mb-2"},"Format",-1),he={class:"p-fluid mb-2"},fe=_("span",{class:"pi pi-plus"},null,-1),ge=_("span",{class:"pi pi-minus"},null,-1),xe={class:"p-fluid mb-2"},we=_("h1",{class:"border-bottom-1 mb-2"},"Players",-1),Re={class:"p-fluid mb-2"},Ie=_("span",{class:"pi pi-plus"},null,-1),Te=_("span",{class:"pi pi-minus"},null,-1),$e={class:"p-fluid"},Se=U({__name:"FlyerForm",props:{players:{}},emits:["start","setName","reset"],setup(n,{emit:a}){const l=n,i=a,r=R(4),u=R("Round Robin"),d=R(["Round Robin"]),c=R(1);G(()=>{const S=document.getElementsByClassName("p-inputnumber-button");for(const g of S)g.addEventListener("mouseup",()=>{var f;(f=document.activeElement)==null||f.blur()})});const v=C(()=>l.players.slice(0,r.value)),x=()=>i("start",v.value,c.value);return(S,g)=>{const f=$("InputNumber"),m=$("SelectButton"),t=$("Button");return y(),b(B,null,[be,_("div",he,[h(f,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=s=>c.value=s),showButtons:"",buttonLayout:"horizontal",min:1,max:5,prefix:"Races to ",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:V(()=>[fe]),decrementbuttonicon:V(()=>[ge]),_:1},8,["modelValue"])]),_("div",xe,[h(m,{modelValue:u.value,"onUpdate:modelValue":g[1]||(g[1]=s=>u.value=s),options:d.value,allowEmpty:!1,"aria-labelledby":"basic"},null,8,["modelValue","options"])]),we,_("div",Re,[h(f,{modelValue:r.value,"onUpdate:modelValue":g[2]||(g[2]=s=>r.value=s),showButtons:"",buttonLayout:"horizontal",min:2,max:10,suffix:" players",inputStyle:{"text-align":"center","font-weight":"bold"}},{incrementbuttonicon:V(()=>[Ie]),decrementbuttonicon:V(()=>[Te]),_:1},8,["modelValue"])]),(y(!0),b(B,null,F(S.players,(s,e)=>(y(),b("div",null,[h(ve,{class:"mb-2",placeholder:"Player "+(e+1),disabled:e>=r.value,name:s,onSetName:o=>i("setName",e,o)},null,8,["placeholder","disabled","name","onSetName"])]))),256)),_("div",$e,[h(t,{label:"Start",disabled:v.value.some(s=>!s),onClick:x},null,8,["disabled"])])],64)}}}),Ve=n=>(H("data-v-d8b3f8dd"),n=n(),O(),n),ke=Ve(()=>_("h1",{class:"border-bottom-1"},"Results",-1)),Ce={key:0},Be=U({__name:"ResultsTable",props:{players:{},results:{}},setup(n){const a=n,l=t=>i(t)?null:t.scores.reduce((e,o)=>e.score>o.score?e:o).playerId,i=t=>{const s=t.scores.map(e=>e.score).reduce((e,o)=>Math.max(e,o));return t.scores.every(e=>e.score===s)},r=t=>i(t)?null:t.scores.reduce((e,o)=>e.score<o.score?e:o).playerId,u=(t,s)=>s.filter(e=>l(e)===t).length,d=(t,s)=>s.filter(e=>i(e)&&e.scores.some(o=>o.playerId===t)).length,c=(t,s)=>s.filter(e=>r(e)===t).length,v=(t,s)=>s.filter(e=>e.scores.some(o=>o.playerId===t)).length<a.players.length-1,x=(t,s,e)=>{const o=u(t,e),p=u(s,e);if(o!==p)return p-o;const w=c(t,e),T=c(s,e);return w!==T?T-w:0},S=C(()=>a.players.sort((t,s)=>x(t.id,s.id,a.results))),g=C(()=>S.value.map((t,s)=>({rank:s+1,name:t.name,wins:u(t.id,a.results),draws:d(t.id,a.results),losses:c(t.id,a.results),incomplete:v(t.id,a.results)}))),f=t=>[{"bg-primary":!t.incomplete&&t.rank===1,"bg-gray-400":t.incomplete}],m=g.value.filter(t=>t.incomplete).length;return(t,s)=>{const e=$("Column"),o=$("DataTable");return y(),b(B,null,[ke,h(o,{value:g.value,rowClass:f},{default:V(()=>[h(e,{field:"rank",header:"#"}),h(e,{field:"name",header:"Name"}),h(e,{field:"wins",header:"Won"}),h(e,{field:"draws",header:"Drew"}),h(e,{field:"losses",header:"Lost"})]),_:1},8,["value"]),j(m)>0?(y(),b("h4",Ce,[_("em",null,k(j(m))+" player(s) have incomplete results!",1)])):N("",!0)],64)}}}),A=(n,a)=>{const l=n.__vccOpts||n;for(const[i,r]of a)l[i]=r;return l},Ue=A(Be,[["__scopeId","data-v-d8b3f8dd"]]),De={class:"flex flex-column md:flex-row justify-content-between md:align-items-end border-bottom-1 pb-1"},Ne=_("h1",null,"Round-Robin",-1),Pe={key:0,class:"flex justify-content-center"},Fe=["onClick"],Le={key:0},je={key:1},Me={key:2,class:"flex justify-content-center"},Ee=U({__name:"RoundRobinTable",props:{players:{},raceTo:{},results:{}},emits:["updateResult"],setup(n,{emit:a}){const l=n,i=a,r=R(),u=R(!1),d=C(()=>l.results.filter(t=>!t.startTime).length),c=(t,s)=>l.results.some(e=>e.scores.some(o=>o.playerId===t)&&e.scores.some(o=>o.playerId===s)),v=(t,s)=>l.results.find(e=>e.scores.some(o=>o.playerId===t)&&e.scores.some(o=>o.playerId===s)),x=(t,s)=>{const e=v(t,s);return e?e.scores.find(o=>o.playerId===t).score:null},S=(t,s)=>{const e=x(t,s),o=x(s,t);if(e===null||o===null)return"";const p=v(t,s);return p!=null&&p.startTime?e>o?"bg-primary":e<o?"bg-red-500":"bg-yellow-200":"bg-cyan-100"},g=(t,s)=>{r.value=v(t.id,s.id),u.value=!0},f=t=>{i("updateResult",t),m()},m=()=>{u.value=!1};return(t,s)=>{const e=$("Column"),o=$("DataTable");return y(),b(B,null,[_("div",De,[Ne,_("h4",null,"Results remaining: "+k(d.value),1)]),h(o,{value:l.players},{default:V(()=>[h(e,null,{body:V(p=>[J(k(p.data.name),1)]),_:1}),(y(!0),b(B,null,F(l.players,(p,w)=>(y(),D(e,{header:p.name},{body:V(T=>[T.index===w?(y(),b("div",Pe," - ")):c(T.data.id,p.id)?(y(),b("div",{key:1,class:z(["flex justify-content-center cursor-pointer",S(T.data.id,p.id)]),onClick:()=>g(T.data,p)},[v(T.data.id,p.id).startTime?(y(),b("span",Le,k(x(T.data.id,p.id))+"-"+k(x(p.id,T.data.id)),1)):(y(),b("span",je," ?-? "))],10,Fe)):(y(),b("div",Me," ? "))]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),r.value?(y(),D(W,{key:0,visible:u.value,players:l.players,result:r.value,raceTo:l.raceTo,onConfirm:f,onCancel:m},null,8,["visible","players","result","raceTo"])):N("",!0)],64)}}}),ze=n=>(H("data-v-bcd3d62a"),n=n(),O(),n),He={key:0},Oe={key:1},We={class:"p-fluid"},Ae={class:"p-fluid mt-2"},Ge={key:2},Je={class:"p-fluid mt-2"},Ke=ze(()=>_("footer",null,[_("a",{href:"https://www.flaticon.com/free-icons/ball-eight",title:"ball eight icons"},"Ball eight icons created by Boris farias - Flaticon")],-1)),Qe=U({__name:"HomeView",setup(n){const a="Player 1;Player 2;Player 3;Player 4";let l=[];l=String(a).split(";"),l.length<10&&(l=[...l,...new Array(10-l.length).fill("")]);const i=R(0),r=R(l),u=R([]),d=R(0),c=R([]),v=R("Table"),x=s=>i.value=s,S=(s,e)=>{r.value=r.value.map((o,p)=>p===s?e:o)},g=(s,e)=>{u.value=s.map(o=>({id:E(),name:o})),d.value=e,c.value=f(u.value),x(1)},f=s=>{const e=[];return s.forEach((o,p)=>{for(let w=p+1;w<s.length;w++)e.push({id:E(),scores:[o,s[w]].map(T=>({playerId:T.id,score:0})),startTime:null})}),e},m=s=>{const e=c.value.findIndex(o=>o.id===s.id);e>=0?c.value=c.value.map((o,p)=>p===e?s:o):c.value=[...c.value,s]},t=()=>{x(0),u.value=[],d.value=0,c.value=[]};return(s,e)=>{const o=$("SelectButton"),p=$("Button");return y(),b(B,null,[_("main",null,[i.value===0?(y(),b("div",He,[h(Se,{players:r.value,onSetName:S,onStart:g},null,8,["players"])])):i.value===1?(y(),b("div",Oe,[_("div",We,[h(o,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=w=>v.value=w),options:["Table","List"],allowEmpty:!1,"aria-labelledby":"basic"},null,8,["modelValue","options"])]),v.value==="Table"?(y(),D(Ee,{key:0,players:u.value,raceTo:d.value,results:c.value,onUpdateResult:m},null,8,["players","raceTo","results"])):N("",!0),v.value==="List"?(y(),D(_e,{key:1,players:u.value,raceTo:d.value,results:c.value,onUpdateResult:m},null,8,["players","raceTo","results"])):N("",!0),_("div",Ae,[h(p,{label:"Finish",onClick:e[1]||(e[1]=()=>x(2))})])])):i.value===2?(y(),b("div",Ge,[h(Ue,{players:u.value,results:c.value},null,8,["players","results"]),_("div",Je,[h(p,{label:"Restart",onClick:t})])])):N("",!0)]),Ke],64)}}}),Ye=A(Qe,[["__scopeId","data-v-bcd3d62a"]]);export{Ye as default};
